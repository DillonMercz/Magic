<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Sports Betting Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="./style.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</head>

<body>
    <div class="rain-block">
        <div class="line" style="--i:20"></div>
        <div class="line" style="--i:25"></div>
        <div class="line" style="--i:13"></div>
        <div class="line" style="--i:4"></div>
        <div class="line" style="--i:17"></div>
        <div class="line" style="--i:35"></div>
        <div class="line" style="--i:30"></div>
        <div class="line" style="--i:21"></div>
        <div class="line" style="--i:9"></div>
        <div class="line" style="--i:8"></div>
        <div class="line" style="--i:11"></div>
        <div class="line" style="--i:38"></div>
        <div class="line" style="--i:1"></div>
        <div class="line" style="--i:24"></div>
        <div class="line" style="--i:14"></div>
        <div class="line" style="--i:29"></div>
        <div class="line" style="--i:37"></div>
        <div class="line" style="--i:18"></div>
        <div class="line" style="--i:22"></div>
        <div class="line" style="--i:40"></div>
        <div class="line" style="--i:31"></div>
        <div class="line" style="--i:26"></div>
        <div class="line" style="--i:7"></div>
        <div class="line" style="--i:2"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
        <div class="line" style="--i:33"></div>
        <div class="line" style="--i:23"></div>
        <div class="line" style="--i:27"></div>
        <div class="line" style="--i:28"></div>
        <div class="line" style="--i:34"></div>
        <div class="line" style="--i:39"></div>
        <div class="line" style="--i:6"></div>
        <div class="line" style="--i:32"></div>
        <div class="line" style="--i:3"></div>
        <div class="line" style="--i:19"></div>
        <div class="line" style="--i:15"></div>
        <div class="line" style="--i:12"></div>
        <div class="line" style="--i:16"></div>
        <div class="line" style="--i:10"></div>
        <div class="line" style="--i:5"></div>
        <div class="line" style="--i:36"></div>
    </div>
    <div class="container mt-4">
        <center>
            <h1 class="" style="padding:8.0px;font-family: ModeSeven;">AI NBA Betting Dashboard</h1>
        </center>
        <br>
        <br>
        <!-- Live Scores Section -->
        <section class="card mb-4 neon-block">
            <span class="rainbow"></span>
            <div class="card-header">
                <h2>Scoreboard</h2>
            </div>
            <div class="swiper-container">
                <div class="swiper-wrapper" id="scores-container">
                    <!-- Live scores cards will be dynamically added here -->
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
            </div>
        </section>
        <!-- AI Predictions Section -->
        <div class="card mb-4 neon-block">
            <span class="rainbow"></span>
            <div class="card-header">
                <h2>AI Predictions</h2>
            </div>
            <div class="swiper-container">
                <div class="swiper-wrapper" id="ai-container">
                    <!-- Live scores cards will be dynamically added here -->
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
            </div>
        </div>
        <!-- Performance Tracking Section -->
        <div class="card mb-4 neon-block">
            <span class="rainbow"></span>
            <div class="card-header">
                <h2>Performance Tracking</h2>
            </div>
            <div class="card-body">
                <!-- Display performance data, wins/losses, charts, etc. -->
                <!-- You will insert your performance tracking data here -->
            </div>
        </div>
        <!-- Financial Tracking Section -->
        <div class="card mb-4 neon-block">
            <span class="rainbow"></span>
            <div class="card-header">
                <h2>Financial Tracking</h2>
            </div>
            <div class="card-body">
                <!-- Display financial data, transactions, profit/loss, etc. -->
                <!-- You will insert your financial tracking data here -->
            </div>
        </div>
        <div class="card col-4 neon-block info-column">
            <span class="rainbow"></span>
            <div class="card-header">
                <center>
                    <h2>Extra Info</h2>
                </center>
            </div>
            <div class="card-body neon-cards">
                <div class="card">
                    <center>
                        <h3>FLIFF PROMO</h3>
                    </center>
                    <h4>Use code: UYLRU</h4>
                    <hr>
                    <center>
                        <h4><a href="https://get.fliffapp.com/QlC3/6okd8p2v">Use This Link</a></h4>
                    </center>
                </div>
                <hr>
                <div class="card">
                    <center>
                        <h3>LEARN BETTING</h3>
                    </center>
                    <h4><a href="https://www.sportsbookreview.com/how-to-bet-on-sports/nba-betting/">Types of Bets</a></h4>
                    <h4><a href="https://www.sportsbookreview.com/how-to-bet-on-sports/how-to-read-odds/">How to Read Odds</a></h4>
                    <h4><a href="https://www.sportsbookreview.com/how-to-bet-on-sports/over-under-betting/">What is Over/Under</a></h4>
                    <h4><a href="https://www.sportsbookreview.com/betting-sites/">Find Your Platform</a></h4>
                </div>
            </div>
        </div>
        <div class="card col-4 neon-block activity-column">
            <span class="rainbow"></span>
            <div class="card-header">
                <center>
                    <h2>Activity</h2>
                </center>
            </div>
            <div class="card-body">
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
    const currentDate = new Date();
    const formattedDate = currentDate.toISOString().split('T')[0];

    function getNBAScores() {
        fetch("https://script.google.com/macros/s/AKfycbxnVesww5OenWTsUN6C7iwICF3aHSnszBkRjV50l-wgr31-ajeof8npw1D19muM7Rpd/exec")
            .then(response => response.text())
            .then(result => displayScores(JSON.parse(result)))
            .catch(error => console.log('error', error));


    }

    function displayScores(data) {

        const scoresContainer = document.getElementById('scores-container');
        scoresContainer.innerHTML = '';
        for (var i in data.scoreboard.games) {
            const game = data.scoreboard.games[i];
            console.log(game)
            //console.log(game)

            // Extracting quarterly scores
            const quarterlyScores = game.homeTeam.periods.map((period, index) => ({
                quarter: index + 1,
                homeScore: period.score,
                awayScore: game.awayTeam.periods[index].score,
            }));
            var time = game.gameClock
            var color = '';
            if (time !== null && time !== "null" && time !== "") {
                color = 'lightgreen';
            } else {
                color = 'red';
            }

            const cardTemplate = `
        <div class="swiper-slide"> 
                        <span style="background:linear-gradient(90deg, transparent, ${color}) !important"></span>
                <span style="background:linear-gradient(90deg, transparent, ${color}) !important"></span>                       
                <span style="background:linear-gradient(90deg, transparent, ${color}) !important"></span>                       
                <span style="background:linear-gradient(90deg, transparent, ${color}) !important"></span>                       
                     

            <div class="pd4">
                <div class="card-header">
                    <h2>${game.gameStatusText || 'Not Started'}</h2>
                </div>
                <div class="card-body">
                    <p>${game.awayTeam.teamName} - ${game.awayTeam.score}</p>
                    <p>${game.homeTeam.teamName} - ${game.homeTeam.score}</p>
                    <p>Total: ${game.awayTeam.score + game.homeTeam.score}</p>

                    <!-- Bootstrap Table for Quarterly Scores -->
                    <table class="table table-bordered mt-3">
                        <thead>
                            <tr>
                                <th>Quarter</th>
                                ${quarterlyScores.map(score => `<th>${score.quarter}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>${game.awayTeam.teamName}</td>
                                ${quarterlyScores.map(score => `<td>${score.awayScore}</td>`).join('')}
                            </tr>
                            <tr>
                                <td>${game.homeTeam.teamName}</td>
                                ${quarterlyScores.map(score => `<td>${score.homeScore}</td>`).join('')}
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;

            scoresContainer.innerHTML += cardTemplate;

            var progress = document.getElementById(`${game.homeTeam.teamCity} ${game.homeTeam.teamName}-progress`);
            var stats = document.getElementById(`${game.homeTeam.teamCity} ${game.homeTeam.teamName}-stats`);
            var status = document.getElementById(`${game.homeTeam.teamCity} ${game.homeTeam.teamName}-status`);
            var statsArray = stats.innerHTML.split(" ");
            console.log(statsArray)
            var bet = statsArray[0];
            var prediction = statsArray[2];
            console.log(bet, prediction)

            // Assuming game.awayTeam.score and game.homeTeam.score are available

            var totalPoints = game.awayTeam.score + game.homeTeam.score;

            // Assuming you have a variable named 'prediction' with the predicted total points

            // Assuming you want to check if the bet is 'OVER'
            if (bet === 'OVER' && totalPoints > prediction) {
                status.innerHTML = '<div style="color:#55fdc4;text-shadow:0 0 0.3em rgba(0, 0, 0, 0.5), 0 0 0.6em lightgreen">Winning</div>';
            } else if (bet === 'OVER' && totalPoints <= prediction) {
                status.innerHTML = '<div style="color:red">Losing</div>';
            } else if (bet === 'UNDER' && totalPoints < prediction) {
                status.innerHTML = '<div style="color:#55fdc4;text-shadow:0 0 0.3em rgba(0, 0, 0, 0.5), 0 0 0.6em lightgreen">Winning</div>';
            } else if (bet === 'UNDER' && totalPoints >= prediction) {
                status.innerHTML = '<div style="color:red">Losing</div>';
            } else {
                // Handle any other cases or set a default status
                status.innerHTML = 'No result';
            }

            // Update progress value
            progress.value = totalPoints;

        };

        // Initialize Swiper
        const swiper = new Swiper('.swiper-container', {
            slidesPerView: 1,
            spaceBetween: 'auto',
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });
    }


    // Fetch and display scores initially
    getNBAScores();

    // Poll the API every minute to get the latest scores
    setInterval(getNBAScores, 20000);


    function parseISO8601Duration(duration) {
        const regex = /PT(?:(\d+)M)?(?:(\d+)S)?/;
        const match = duration.match(regex);

        const minutes = match[1] ? match[1] : '0';
        const seconds = match[2] ? match[2] : '0';

        return `${minutes}:${seconds}`;
    }

    var requestOptions = {
        method: 'GET',
        redirect: 'follow'
    };

    fetch("https://cryptaverse.xyz/predictions/2023-11-21_predictions.json", requestOptions)
        .then(response => response.text())
        .then(result => buildPredictions(JSON.parse(result)))
        .catch(error => console.log('error', error));


    function buildPredictions(predictions) {
        const aiContainer = document.getElementById('ai-container');
        aiContainer.innerHTML = '';
        for (var i in predictions) {
            const game = predictions[i]
            console.log(predictions[i].under_over, predictions[i].total, predictions[i].away_team, predictions[i].home_team, predictions[i].expected_value_colors.home_color)
            const cardTemplate = `
        <div class="swiper-slide">                    
                     

            <div class="pd4">
                <div class="card-body">
                <h3 id="${predictions[i].home_team}-stats">${game.under_over}  ${game.total}</h3>
                    <p style="display:inline; color:${game.expected_value_colors.away_color} !important">${game.away_team}</p> <p style="display:inline;">vs </p> <p style="display:inline; color:${game.expected_value_colors.home_color} !important">${game.home_team}</p>
                    <br>
                    <div class="neon-bar">
                      <progress id="${predictions[i].home_team}-progress" class='bar' value='0' max='400'></progress>
                      <div id="${predictions[i].home_team}-status" class='bar__value'></div>
                    </div>
                    
                   

                </div>
            </div>
        </div>
    `;

            aiContainer.innerHTML += cardTemplate;
        }
        // Initialize Swiper
        const swiper = new Swiper('#ai-container', {
            slidesPerView: 1,
            spaceBetween: 'auto',
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });
    }
    </script>
</body>

</html>